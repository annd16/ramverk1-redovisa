---
---
Redovisning kmom01
=========================

<!-- #### Gör din egen kunskapsinventering baserat på PHP The Right Way, berätta om dina styrkor och svagheter som du vill förstärka under kursen och det kommande året. -->
<strong>Min kunskapsinventering baserat på PHP The Right Way, mina styrkor och svagheter.</strong>

PHP The Right Way är en väldigt omfattande sammanställning av det mesta som man kan tänkas behöva veta som PHP-programmerare. De elva första kaptilen behandlar sådant som jag känner igen från tidigare kurser, MEN det finns väldigt lite som jag känner att jag kan lägga bakom mig ’för det här kan jag redan’. De sista kapitlen (kap 13-16 förutom kap16 som handlar om dokumentation av sin kod) känns ganska ”främmande”.
I ett försök att få en överblick, och att differentiera ut min (upplevda) kunskapsnivå på de olika områdena, har jag gjort en tabell:

Nivåer/efarenhet:
Ingen, Liten, Mellan, Stor, Expert

Kapitel:


|   	|   Kapitel   	     |      Nivå      |      Kommentar   	                          | Tas upp i denna kurs?
|---	|:-----------------: |:--------------:|:---------------------------------------------:|
| 3 	| Codestyle Guide    |  liten         | Har kommit i kontakt med PSR förut som begrepp men har inte jobbat mot någon av dessa standarder själv ännu (förutom vad gäller autoloading av klasser). | Ja
| 4 	| Language Highlights	|  liten   	| Procedurellt och objektorienterat (inte funktionellt). Namnrymder kan vara lite knepigt 	|  Ja  
| 5 	| Dependency Management 	| liten 	|  Har använt ju använt composer  (inte PEAR) rätt mycket för att hantera beroenden, men har kanske inte någon större inblick i vad som händer bakom kulisserna.  |  Ja
| 6 	| Coding practices 	| mellan	|   Tror mig ha rätt bra koll på grunderna, kommer förhoppningsvis mer praktisk erfarenhet av 'design patterns' i denna kurs.   	|   Ja   	|
| 7 	| Dependency Injection 	| liten |  I form av interfaces och traits i oophp-kursen.    	|   kmom03  	|  	|
| 8 	| Databases  	| liten 	|   Med PDO som gränssnitt för databas-access.   	|   kmom06	|
| 9 	| Templating 	| mellan 	|   Har erfarenhet av enkla templatefiler - inte kompilerade - för att skapa vyer i de olika ramverksbaserade kurserna.   	|  kmom01->	|
| 10    | Errors and Exceptions     |    liten                                      | Vet hur man slår på felrapporteringen och har skapat egna exceptions.  | Nej, inte explicit i alla fall.
| 11 	| Security 	| liten 	|   Måste bli bättre på att följa de säkerhetsregler som finns.   |   Nej, inte explictit i alla fall.  |
| 12	| Testing              | liten 	   | Enhetstester med PHPunit.  	|   kmom01->   	|
| 13 	| Servers and deployment	| Ingen 	|   Om jag förstått det rätt så kan "deployment" i dessa sammanhang tolkas som 'ihopknytning av de resurser som krävs för att sjösätta sin applikation' och det kanske är det det vi får träna oss på när vi ska göra en egen extern modul.   	|   kmom04?   	|
| 14 	| Virtualization 	| Ingen 	|   Har hört det surras om "Docker" men har inget riktigt begrepp om denna företeelse ännu... 	| Ja
| 15 	| Caching 	| Ingen 	|   -   	| Nej(?)	|
| 16 	| Documenting your code 	| Liten 	|  PHPdoc i oophp 	|   Ja (Men på frivilllig basis?)	|


<!-- div style="overflow: auto;">
    <span style=" background-color: #f00; width: 100px; height: 100px; float: left; margin: 8px; border: 1px solid #ccc;"></div>
    <div style=" background-color: #0f0; width: 100px; height: 100px; float: left; margin: 8px; border: 1px solid #ccc;"></div>
    <div style=" background-color: #00f; width: 100px; height: 100px; float: left; margin: 8px; border: 1px solid #ccc;"></div>
    <div style=" background-color: #333; width: 100px; height: 100px; float: left; margin: 8px; border: 1px solid #ccc;"></div>
    <div style=" background-color: #999; width: 100px; height: 100px; float: left; margin: 8px; border: 1px solid #ccc;"></div>
    <div style=" background-color: #fff; width: 100px; height: 100px; float: left; margin: 8px; border: 1px solid #ccc;"></div>
    <div style=" background-color: #f00; width: 100px; height: 100px; float: left; margin: 8px; border: 1px solid #ccc;"></div>
    <div style=" background-color: #0f0; width: 100px; height: 100px; float: left; margin: 8px; border: 1px solid #ccc;"></div>
    <div style=" background-color: #00f; width: 100px; height: 100px; float: left; margin: 8px; border: 1px solid #ccc;"></div>
    <div style=" background-color: #333; width: 100px; height: 100px; float: left; margin: 8px; border: 1px solid #ccc;"></div>
    <div style=" background-color: #999; width: 100px; height: 100px; float: left; margin: 8px; border: 1px solid #ccc;"></div>
    <div style=" background-color: #fff; width: 100px; height: 100px; float: left; margin: 8px; border: 1px solid #ccc;"></div>
    <div style=" background-color: #f00; width: 100px; height: 100px; float: left; margin: 8px; border: 1px solid #ccc;"></div>
    <div style=" background-color: #0f0; width: 100px; height: 100px; float: left; margin: 8px; border: 1px solid #ccc;"></div>
    <div style=" background-color: #00f; width: 100px; height: 100px; float: left; margin: 8px; border: 1px solid #ccc;"></div>
    <div style=" background-color: #333; width: 100px; height: 100px; float: left; margin: 8px; border: 1px solid #ccc;"></div>
    <div style=" background-color: #999; width: 100px; height: 100px; float: left; margin: 8px; border: 1px solid #ccc;"></div>
    <div style=" background-color: #fff; width: 100px; height: 100px; float: left; margin: 8px; border: 1px solid #ccc;"></div>
</div> -->

<!-- 1. Welcome
Translations
How to Contribute
Spread the Word!
2. Getting Started
Use the Current Stable Version (7.2)
Built-in Web Server
Mac Setup
Windows Setup
Common Directory Structure
3. Code Style Guide
4. Language Highlights
Programming Paradigms
Namespaces
Standard PHP Library
Command Line Interface
Xdebug
5. Dependency Management
Composer and Packagist
PEAR
6. Coding Practices
The Basics
Date and Time
Design Patterns
Working with UTF-8
Internationalization and Localization
7. Dependency Injection
Basic Concept
Complex Problem
Containers
Further Reading
8. Databases
MySQL Extension
PDO Extension
Interacting with Databases
Abstraction Layers
9. Templating
Benefits
Plain PHP Templates
Compiled Templates
Further Reading
10. Errors and Exceptions
Errors
Exceptions
11. Security
Web Application Security
Password Hashing
Data Filtering
Configuration Files
Register Globals
Error Reporting
12. Testing
Test Driven Development
Behavior Driven Development
Complementary Testing Tools
13. Servers and Deployment
Platform as a Service (PaaS)
Virtual or Dedicated Servers
Shared Servers
Building Your Application
14. Virtualization
Vagrant
Docker
15. Caching
Opcode Cache
Object Caching
16. Documenting your Code
PHPDoc
17. Resources
From the Source
People to Follow
Mentoring
PHP PaaS Providers
Frameworks
Components
Other Useful Resources
Video Tutorials
Books
18. Community
User Groups
Conferences
Elephpants
Credits -->


Av tabellen framgår det att många av mina kunskapsluckor kommer att fyllas igen i denna kurs, toppen! :)


<!-- #### Vilket blev resultatet från din mini-undersökning om vilka ramverk som för närvarande är mest populära inom PHP (ange källa var du fann informationen)? -->

<strong>Resultatet från min mini-undersökning över vilka ramverk som för närvarande är mest populära inom PHP</strong>

Har gjort det enkelt för mig: sökte på google på ’popular php framework’ och tog de tre resultat som hamnade överst, noterade vilka ramverk som hamnade på top5-listan i respektive fall och jämförde med Mikaels topplista från 2014.

A. [coderseye](https://coderseye.com/best-php-frameworks-for-web-developers/)  
B. [hongkiat](https://www.hongkiat.com/blog/best-php-frameworks/)   
C. [lunarpages](https://lunarpages.com/most-popular-php-frameworks-of-2018/)


|   	|    1    	|      2      	|      3      	|      4      	|    5    	|
|---	|:-------:	|:-----------:	|:-----------:	|:-----------:	|:-------:	|
| A 	| Laravel 	|   Phalcon   	|   Symphony  	| CodeIgniter 	| CakePHP 	|
| B 	| Laravel 	|   Symfony   	| CodeIgniter 	|    Yii 2    	| Phalcon 	|
| C 	| Laravel 	| CodeIgniter 	|   Symfony   	|   Phalcon   	| CakePHP 	|


MOS lista: •	Laravel
•	Phalcon
•	Symfony2


Högst upp på alla listor kom Laravel, Symfony hade antingen en andra eller tredje placering, Phalcon och CodeIgniter fanns med på alla listorna på olika placeringar.


Kanske är det så att Phalcon har tappat något i popularitet sedan 2014:s undersökning, medan Symfony2 klättrat uppåt på popularitetslistan.



<strong>Berätta om din syn/erfarenhet generellt kring communities och specifikt communities inom opensource och programmeringsdomänen.</strong>

Min enda erfarenhet av en community utanför dbwebb är nog Stackoverflow (ej som medlem, endast som problemlösningsbank). Jag imponeras av all den kunskap som finns där och viljan och drivkraften hos många att dela med sig av sina kunskaper, men slås också av den arroganta, ofta nedlåtande ton som vissa har gentemot frågeställare och 'inläggare', så egentligen borde jag väl inte bli förvånad av vad som framkom i förläsningen  "PHP UK conference 2017 - State of the PHP community" med Eli White. Kanske är det så att människor som brinner för något (och i och för sig är väldigt duktiga) kanske glömmer bort att/inte tycker sig behöva visa takt och god ton. Dbwebb communityn (dvs gitterchattarna och forumet) verkar överlag ha en 'snällare' ton.  

<strong>“En ramverkslös värld?”</strong>

Som jag förstått det så är föreläsaren ("PHP UK Conference 2017 - Michael Cullum - Towards a frameworkless world"), som jobbar för PHP-FIG (som sätter standarder för t ex interfaces), av den åsikten att vi borde röra oss bort från ramverksspecifika lösningar. Istället borde vi bygga PHP-applikationer som använder sig av ett lib av fristående moduler som klistras samman av ett lim (som då INTE ska vara ett specifikt ramverk). Å ena sidan är det ju bra att man som utvecklare inte binder upp sina appar mot något ramverk, men om jag skulle gissa på något så tror jag att det nog kommer finnas ramverk även framöver, dels för att det alltid kommer finnas en och annan utvecklare som känner sig manad att bygga nya ramverk, och dels pga av det trots allt finns många (framförallt kanske inte så erfarna programmerare?) som vill ha något att hänga upp sin kod på, och gärna slipper att grotta ner sig i de mest grundläggande aspekterna av ett ramverks tjänster.

<strong>Min Redovisa-sida</strong>

Jag bestämde mig på ett tidigt stadium för att köra LESS, eftersom jag fick mersmak i designkursen, och nu när vi fick oss serverat ett LESS-tema gjorde jag slag i saken. Har väl inte gjort några större förändringar av den medföjande stilen än så länge, förutom att jag bytt ut dbwebb-loggan, lagt in/bytt ut flashbilden och lagt till en undermeny med en 'kill session' länk. Loggan och flashbilden kommer från samma grundbild, men flashbilden har jag fått fram genom att klippa och klistra i GIMP. Det var lite pyssel med att komma igång med LESS, verkar som att det inte fungerar att köra 'make build' direkt i themekatalogen.

<strong>Arbetetet med mina 'kontrollers'</strong>

Att göra själva kontrollerna (IpValidatorController och IpValidatorJsonController) var inte jättesvårt eftersom det fanns redan ganska snarlika befintliga kontollers att utgå ifrån. Däremot var det inte helt lätt att få till enhetstesningen av dessa. Största anledningen till detta var att jag valde att flytta ut en del av funktionerna som används av bägge kontrollerna till en egen klass, IpValidator.

Har gjort så att första gången man surfar in på IP-sidan fylls klientens IP-adress i automatiskt i formulärets inputfält (om en sådan finns att tillgå i $\_SERVER-variabeln), men efter att man börja mata in något i formuläret så måste man hämta den genom att klicka på en knapp. Anledningen till att jag gjort så var att jag ville att senaste inskrivna Ip-adressen skulle vara kvar även efter en sökning, för att underlätta vid utveklingen, men det kan ju vara så att det även underlättar för användaren också om hen t ex vill testa både web och jsonvarianten för samma address.

När jag sedan skulle enhetstesta så tyckte jag att allt verkade fungera, förutom att testet av den metod som skulle hämta klientens IP-adress klassade alla föreslagna IP-addresser som "inte giltiga". Detta visade sig bero på att requestobjektet måste skickas med in till kontrollermetoden, och sedan vidare in till den aktuella metoden. Det tog ett tag för mig att komma på det, var lite 'ovillig' att ge mig på att ändra något i kontrollerna eftersom det ju föreföll fungera i webbläsaren.


När enhetstesterna (i stort sett) fungerade visade det sig (så klart) att phpmd inte gillade att jag att anropade båda klasserrna 'IpValidator' och 'Form4'-klassen statiskt inuti ett par av kontrollermetoderna. För att lösa detta omvandlade jag IpValidator-klaseen till ett 'trait' som använder sig av ett interface 'ipValidatorInterface' och lät bägge kontrollerna implementera detta interface och använda sig av traitet. Då blev validatorn nöjd. Fick sedan läsa på hur man enhetstestar ett trait. Form4-klassen valde jag istället att göra tillgänglig som en tjänst i ramverket genom att lägga till den i di-kontainern.

Har inte lyckats få 100% enhetstäckning på allt som ligger i min src-mapp men kontrollerna och Ipvalidator-traitet är det 100% kodtäckning på.

För att underlätta enhetstestandet skapade jag en ny formulärsklass Form4unit, som ärver Form4. Denna klass har två överlagrande metoder som är publika istället för privata. Dock lyckades jag aldrig få 100% kodtäckning på alla metoderna i denna klass.

Har skapat en 'egen' Requestklass dvs jag flyttade över den befintliga Requestklassen till min src-mapp och lade till en egen metod i denna. (Fick det inte att fungera när jag försökte låta denna klass ärva från vendor-klassen).

Har skapat en egen Sessionklass (Session2) också, och denna ärver från Session-klassen i vendormappen. Inte helt nödvändigt, men jag gjorde detta för jag ville ha en metod för att 'appenda' ett redan befintligt flashmeddelande på ett lite snyggare sätt.   

Utöver det så fick jag ju en hel del klagomål från phpcs, då blev jag glad när jag såg att man kunde köra 'make phpbcf' för att på ett 'automagiskt' sätt fixa till dessa fel på nolltid!

Det finns så klart förbättringspotential på min kod och upplägget av mina enhetstester, en del saker har jag ansett mig vara tvungen att göra för att enhetstesterna ska fungera. Förhopppningsvis så kommer jag få nytta av en del som jag gjort i detta kmom, som kanske inte var helt nödvändigt att göra, i de nästkommande kursmomenten!

<!-- Reflection klassen används för att gå in kontrollern för att se om det finns en route som mappar.... -->

<strong>Mina TI:sL för detta kmom</strong>

Har jag ju lärt mig en hel del om enhetstestning i detta kmom! Utöver det så har jag insett att när jag hämtar en bild från Pixabay så ska jag inte bara ladda ner bilden/bilderna utan jag ska också spara bildens webbsida. Bilderna har en tendens att 'försvinna' från Pixabay och då har man ingen möjlighet att kolla t ex bildens licens i efterhand. Om hemsidan med blden sparas får man ett fingeravtryck på vad som faktiskt stod (såsom vilken licens som gällde) när man laddade ner bilden.
